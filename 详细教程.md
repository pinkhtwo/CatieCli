# 🐱 Catiecli 完整使用教程

欢迎使用！本站是一个多功能 AI API 代理服务，支持 Gemini CLI、Antigravity、Anthropic 等多种 AI 模型。

---

## 📋 第一部分：快速开始（5分钟上手）

<details>
### 1️⃣ 注册/登录
1. 点击首页「登录」按钮
2. 使用 Google 账号或 Discord 账号登录
3. 首次登录会自动创建账号
</details>

<details>
### 2️⃣ 获取你的 API Key
1. 登录后，点击顶部「API密钥」标签页
2. 系统会自动生成一个 API Key（以 `cat-` 开头）
3. 点击「复制」按钮复制你的密钥
4. ⚠️ **重要**：请妥善保管，不要分享给他人！
</details>

<details>
### 3️⃣ 配置 SillyTavern / 酒馆
1. 打开 SillyTavern，进入「连接设置」
2. 选择「Chat Completion」
3. API 类型选择「兼容OpenAI」或「Gemini反代」
4. **API 端点**填写：`https://你的站点域名/v1`
5. **API Key**填写：粘贴你复制的密钥
6. **模型**选择：`gemini-3.0-flash` 或 `gemini-3.0-pro`
7. 点击「连接」，显示绿色 **Valid** 即表示连接成功
</details>

---

## 🔑 第二部分：上传凭证获得更高配额

上传你自己的 Google 凭证可以获得 **更高配额** 和 **更快速度**！

<details>
### 🏗️ 准备工作：创建 Google Cloud 项目

**如果你从未使用过 Google Cloud，请先完成这一步：**

1. 访问 [Google Cloud Console](https://console.cloud.google.com/)
2. 使用你的 Google 账号登录
3. 如果是首次使用，需要同意服务条款
4. 点击页面 **左上角** 的项目选择器（可能显示"选择项目"）
5. 在弹出窗口中，点击右上角「**新建项目**」

**创建项目时：**

- 项目名称：随便填，如 `my-ai-project`
- 组织：保持默认（无组织）即可
- 位置：保持默认即可
- 点击「创建」

**⚠️ 重要提醒：**

- 看到「创建虚拟机」「在BigQuery中运行查询」「部署应用」「创建存储桶」等选项时，**全部忽略**！
- 你只需要一个 **空项目** 即可
- 项目创建后会自动选中，左上角会显示项目名称

1. 等待约 30 秒，项目创建完成
2. 确认左上角显示你创建的项目名称
3. ✅ 完成！现在可以回到本站进行 OAuth 授权

</details>

<details>
### 📱 获取 Gemini CLI 凭证

**方式一：OAuth 在线授权（推荐新手）**

1. 在本站点击「凭证管理」标签页
2. 点击「获取凭证」或「立即上传」
3. 点击「🔗 登录 Google 账号」按钮
4. **阅读操作指引弹窗**（会有倒计时）
5. 点击「我已了解，继续」
6. 回答问答题（选择"复制链接并粘贴"的选项）
7. 浏览器会跳转到 **Google 登录页面**
8. 选择你要使用的 Google 账号，登录
9. 点击「继续」「允许」等按钮完成授权
10. 授权后浏览器会打开一个 **无法访问的页面**

**关键步骤：处理"无法访问"的页面**

- 这个页面显示错误是 **完全正常的**！
- 地址栏会显示类似：`http://localhost:9999/callback?code=xxxx...`
- 你需要做的是：**复制整个地址栏的URL**
- 不要只复制 `code=` 后面的部分，要复制 **完整URL**

1. 回到本站的「粘贴回调 URL」输入框
2. 粘贴刚才复制的完整 URL
3. 勾选「上传到公共池」获得额外配额奖励
4. 点击「提交并生成凭证」
5. ✅ 成功！会显示绿色提示和邮箱信息

---

**方式二：上传 JSON 文件（适合有经验的用户）**

如果你已经有 GeminiCLI 的凭证文件（`.json`格式）：

1. 点击「凭证管理」标签页
2. 点击「选择文件」或拖拽文件到上传区
3. 支持单个 `.json` 文件或打包的 `.zip` 文件
4. 点击「上传」
5. ✅ 系统会自动解析并添加凭证

</details>

<details>
### 🚀 获取 Antigravity 凭证（反重力）

**⚠️ 重要须知：**

- Antigravity 凭证与 GeminiCLI 凭证是 **完全独立的**
- 即使你已有 GeminiCLI 凭证，也需要 **单独获取** Antigravity 凭证
- Antigravity 使用不同的 API 端点：`/agy/v1`（不是 `/v1`）
- 没有 Antigravity 凭证，**无法拉取反重力模型**

**OAuth 授权步骤：**

1. 点击左侧「Antigravity 凭证」菜单
2. 点击「获取新凭证」
3. 流程与 GeminiCLI 类似：
   - 阅读指引 → 回答问答 → Google 登录 → 授权 → 复制回调URL → 粘贴提交
4. ✅ 成功后会显示邮箱和 project_id

**上传 JSON 文件：**

- 上传 Antigravity 专用的 JSON 凭证文件
- 文件需包含 `refresh_token` 和 `email` 字段
- 系统会自动获取对应的 `project_id`

</details>

<details>
### 🔮 配置 Anthropic 凭证（Claude 模型）

1. 访问 [Anthropic Console](https://console.anthropic.com/)
2. 登录你的 Anthropic 账号
3. 进入 API Keys 页面
4. 创建一个新的 API Key，复制保存
5. 回到本站，点击「Anthropic 凭证」
6. 粘贴你的 API Key
7. 点击「添加」
8. ✅ 现在可以使用 Claude 系列模型了

</details>

---

## 🎯 第三部分：可用模型说明

<details>
### Gemini CLI 模型（端点：/v1）

| 模型名称           | 说明                           |
| ------------------ | ------------------------------ |
| `gemini-3.0-flash` | 🚀 最新快速模型，推荐日常使用   |
| `gemini-3.0-pro`   | ⭐ 最新高质量模型，推荐重要对话 |
| `gemini-2.5-flash` | 经典快速模型                   |
| `gemini-2.5-pro`   | 经典高质量模型                 |

**使用方式：**

- API 端点：`https://你的域名/v1`
- 支持 OpenAI 兼容接口和 Gemini 反代接口

</details>

<details>
### Antigravity 模型（端点：/agy/v1）

⚠️ 必须有 Antigravity 凭证才能使用！

| 模型名称               | 说明              |
| ---------------------- | ----------------- |
| `agy-gemini-3.0-flash` | 反重力 Flash 模型 |
| `agy-gemini-3.0-pro`   | 反重力 Pro 模型   |
| Claude 系列            | 通过反重力调用    |

**使用方式：**

- API 端点：`https://你的域名/agy/v1`
- **只支持** OpenAI 兼容接口（不支持 Gemini 原生接口）

</details>

<details>
### Anthropic 模型

⚠️ 必须配置 Anthropic API Key！

| 模型名称            | 说明             |
| ------------------- | ---------------- |
| `claude-sonnet-4-5` | ⭐ 推荐，性价比高 |
| `claude-haiku-4-5`  | 🚀 快速响应       |
| `claude-opus-4-5`   | 💎 最高质量       |

</details>

---

## ❓ 第四部分：常见问题解答

<details>
### 🔧 报错状态码自查表

| 状态码  | 问题原因                | 解决方法                                |
| ------- | ----------------------- | --------------------------------------- |
| **401** | API Key 错误或无效      | 检查密钥是否复制完整，重新生成          |
| **403** | 权限不足 / 凭证失效     | 重新获取凭证，或检查是否有有效凭证      |
| **404** | 端点地址错误            | 检查 API 端点是否正确（/v1 或 /agy/v1） |
| **429** | 请求过于频繁 / 配额耗尽 | 等待配额重置，或上传更多凭证            |
| **500** | 服务器内部错误          | 稍后重试，若持续请联系管理员            |
| **502** | 上游服务不可用          | Google API 暂时不可用，稍后重试         |
| **503** | 服务暂时不可用          | 服务器负载过高，稍后重试                |

**常见报错信息：**

- `Resource has been exhausted` → 凭证配额用完，等待重置或换凭证
- `Invalid API Key` → 密钥错误，检查是否复制完整
- `Model not found` → 模型名称错误，检查拼写
- `No available credentials` → 没有可用凭证，需要上传凭证

</details>

<details>
### Q: 授权后出现"无法访问此网站"怎么办？

**这是正常现象！** 请按以下步骤操作：

1. 不要关闭这个页面
2. 看浏览器地址栏，会显示类似 `http://localhost:xxxx/callback?code=...`（**这只是示例，端口号和参数会不同**）
3. 选中整个地址栏内容（Ctrl+A 或全选）
4. 复制（Ctrl+C）
5. 回到本站，粘贴到输入框
6. 点击提交

</details>

<details>
### Q: 为什么拉取不到反重力模型？

可能的原因：

1. **没有 Antigravity 凭证** - 需要单独获取，与 GeminiCLI 凭证不通用
2. **使用了错误的端点** - Antigravity 端点是 `/agy/v1`，不是 `/v1`
3. **凭证已失效** - 尝试重新获取凭证

</details>

<details>
### Q: GeminiCLI 和 Antigravity 有什么区别？

| 项目 | GeminiCLI                 | Antigravity        |
| ---- | ------------------------- | ------------------ |
| 端点 | `/v1`                     | `/agy/v1`          |
| 接口 | OpenAI 兼容 + Gemini 原生 | 只支持 OpenAI 兼容 |
| 凭证 | 独立                      | 独立               |
| 模型 | gemini-\*                 | agy-\* 和 Claude   |

**重要**：两者凭证完全独立，需要分别获取！

</details>

<details>
### Q: 配额什么时候重置？

- 默认在 **UTC 0:00**（北京时间早上 8:00）重置
- 管理员可以在设置中调整为其他时区
- 上传凭证可以获得更高配额

</details>

<details>
### Q: 如何获得更高配额？

1. **上传凭证** - 每上传一个有效凭证，配额会增加
2. **设为公开** - 上传后勾选"上传到公共池"可获得额外奖励
3. **上传多个账号** - 支持上传多个 Google 账号的凭证

</details>

<details>
### Q: 创建 GCP 项目时应该选哪个选项？

**都不用选！** 看到以下选项时直接忽略：

- ❌ 创建虚拟机
- ❌ 在 BigQuery 中运行查询
- ❌ 部署应用
- ❌ 创建存储桶

你只需要创建一个 **空项目** 即可，不需要配置任何资源。

</details>

---

## ⚠️ 注意事项

- 🔒 请勿分享你的 API Key
- 📤 上传凭证建议设为「公开」，可获得配额奖励
- 🔄 GeminiCLI 和 Antigravity 凭证是独立的，需分别获取
- 💡 遇到问题可以查看本教程或联系管理员
